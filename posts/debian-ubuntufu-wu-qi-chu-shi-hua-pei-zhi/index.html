<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Debian&amp;Ubuntu服务器初始化配置</title>
  <meta name=author content="cylind">
  <meta name=description content="&amp;lt;p&amp;gt;本文以Debian 10为例，介绍如何对服务器进行初步配置，本文同样完全适用于 Ubuntu20.04系统。&amp;lt;&#x2F;p&amp;gt;&amp;lt;span id=&amp;quot;continue-reading&amp;quot;&amp;gt;&amp;lt;&#x2F;span&amp;gt;&amp;lt;h2 id=&amp;quot;ji-chu-she-zhi&amp;quot;&amp;gt;基础设置&amp;lt;&#x2F;h2&amp;gt;&amp;lt;p&amp;gt;更改密码:&amp;lt;&#x2F;p&amp;gt;&amp;lt;pre data-lang=&amp;quot;shell&amp;quot; style=&amp;quot;background-color:#ffffff;c…" />
  <meta name="robots" content="max-image-preview:large" />
  <link rel=canonical href="/posts/debian-ubuntufu-wu-qi-chu-shi-hua-pei-zhi/">
  <meta property="og:type" content="article">
  <meta property="og:url" content="/posts/debian-ubuntufu-wu-qi-chu-shi-hua-pei-zhi/">
  <meta property="og:site_name" content="cylind blog">
  <meta property="og:title" content="Debian&amp;Ubuntu服务器初始化配置">
  <meta property="og:description" content="&amp;lt;p&amp;gt;本文以Debian 10为例，介绍如何对服务器进行初步配置，本文同样完全适用于 Ubuntu20.04系统。&amp;lt;&#x2F;p&amp;gt;&amp;lt;span id=&amp;quot;continue-reading&amp;quot;&amp;gt;&amp;lt;&#x2F;span&amp;gt;&amp;lt;h2 id=&amp;quot;ji-chu-she-zhi&amp;quot;&amp;gt;基础设置&amp;lt;&#x2F;h2&amp;gt;&amp;lt;p&amp;gt;更改密码:&amp;lt;&#x2F;p&amp;gt;&amp;lt;pre data-lang=&amp;quot;shell&amp;quot; style=&amp;quot;background-color:#ffffff;c…">
  <meta name=twitter:card content="summary">
  <meta name=twitter:title content="Debian&amp;Ubuntu服务器初始化配置">
  <meta name=twitter:description content="&amp;lt;p&amp;gt;本文以Debian 10为例，介绍如何对服务器进行初步配置，本文同样完全适用于 Ubuntu20.04系统。&amp;lt;&#x2F;p&amp;gt;&amp;lt;span id=&amp;quot;continue-reading&amp;quot;&amp;gt;&amp;lt;&#x2F;span&amp;gt;&amp;lt;h2 id=&amp;quot;ji-chu-she-zhi&amp;quot;&amp;gt;基础设置&amp;lt;&#x2F;h2&amp;gt;&amp;lt;p&amp;gt;更改密码:&amp;lt;&#x2F;p&amp;gt;&amp;lt;pre data-lang=&amp;quot;shell&amp;quot; style=&amp;quot;background-color:#ffffff;c…">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="icon" sizes="16x16" href="/favicon.ico" />
  <link rel=alternate type=application/rss+xml href="/index.xml" title=cylind blog/>
  <link rel="stylesheet" href="/main.css"/>
</head>

<body>
  <header>
    <a class="header__verification" href="">cylind blog</a>
    <p class="header__official">Official</p>
    <nav>
      <ul>
        <li>
          <a href="/">Home</a>
          
        </li>
        <li>
          <a href="/posts/">Posts</a>
          
        </li>
        <li>
          <a href="/about/">About</a>
          
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <article>
      <header>
        <h1>Debian&amp;Ubuntu服务器初始化配置</h1>
        <span>
          <br><time datetime="2020-10-13T12:55:25">Oct 13, 2020</time>
        </span>
      </header><p>本文以Debian 10为例，介绍如何对服务器进行初步配置，本文同样完全适用于 Ubuntu20.04系统。</p>
<span id="continue-reading"></span><h2 id="ji-chu-she-zhi">基础设置</h2>
<p>更改密码:</p>
<pre data-lang="shell" style="background-color:#ffffff;color:#323232;" class="language-shell "><code class="language-shell" data-lang="shell"><span>passwd
</span></code></pre>
<p>更新系统:</p>
<pre data-lang="shell" style="background-color:#ffffff;color:#323232;" class="language-shell "><code class="language-shell" data-lang="shell"><span>apt update &amp;&amp; apt full-upgrade -y &amp;&amp; apt autoremove -y
</span></code></pre>
<p>安装常用软件：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>apt install sudo wget curl htop vim git ffmpeg aria2 zsh zip unzip man npm nodejs speedtest-cli python3 python3-pip ufw fail2ban certbot nginx -y
</span></code></pre>
<p>安装python3常用库：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>pip3 install requests bs4 lxml python-telegram-bot you-get youtube-dl gdown m3u8downloader fake_useragent faker pyexecjs
</span></code></pre>
<p>添加新用户：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>adduser chan
</span></code></pre>
<p>将新用户添加至sudo组：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>usermod -aG sudo chan
</span></code></pre>
<h2 id="an-quan-she-zhi">安全设置</h2>
<h3 id="sshshe-zhi">ssh设置</h3>
<p>修改ssh配置文件</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>vim /etc/ssh/sshd_config
</span></code></pre>
<p>修改ssh端口：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>Port 2333
</span></code></pre>
<p>禁止root远程登录：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>PermitRootLogin no
</span></code></pre>
<p>安装fail2ban防ssh爆破：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>cd /etc/fail2ban
</span><span>cp jail.conf jail.local
</span><span>nano jail.local
</span></code></pre>
<p>sshd处加上 enabled = true，并将所有默认ssh端口为2333</p>
<h3 id="fang-huo-qiang-she-zhi">防火墙设置</h3>
<p>开启防火墙，仅放行ssh端口</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>ufw allow 2333
</span><span>ufw enable
</span></code></pre>
<h2 id="xing-neng-you-hua">性能优化</h2>
<h3 id="tcpchuan-shu-you-hua">TCP传输优化</h3>
<p>查看是否已开启BBR：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>sysctl net.ipv4.tcp_available_congestion_control
</span></code></pre>
<p>如果没有则开启BBR：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf
</span><span>echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf
</span><span>sysctl -p
</span></code></pre>
<h3 id="diao-zheng-swapda-xiao">调整swap大小</h3>
<pre style="background-color:#ffffff;color:#323232;"><code><span>wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh
</span></code></pre>
<h2 id="ge-xing-hua-pei-zhi">个性化配置</h2>
<h3 id="pei-zhi-shell">配置shell</h3>
<p>安装oh-my-zsh</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>wget https://cdn.jsdelivr.net/gh/ohmyzsh/ohmyzsh/tools/install.sh &amp;&amp; bash install.sh
</span></code></pre>
<p>添加自动补全插件：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>git clone https://github.com.cnpmjs.org/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
</span></code></pre>
<p>添加语法高亮插件：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>git clone https://github.com.cnpmjs.org/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
</span></code></pre>
<p>修改配置文件<code>~/.zshrc</code>,修改主题及插件：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>ZSH_THEME=&quot;ys&quot;
</span><span>plugins=(git zsh-autosuggestions zsh-syntax-highlighting)
</span></code></pre>
<h3 id="pei-zhi-vim">配置vim</h3>
<h4 id="an-zhuang-spf13-vim">安装spf13-vim</h4>
<pre data-lang="shell" style="background-color:#ffffff;color:#323232;" class="language-shell "><code class="language-shell" data-lang="shell"><span>sh &lt;(curl https://j.mp/spf13-vim3 -L)
</span></code></pre>
<h4 id="qi-yong-shu-biao-fu-zhi-nian-tie">启用鼠标复制粘贴</h4>
<p>编辑<code>/etc/vim/vimrc.local</code>，添加如下内容</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>source /usr/share/vim/vim81/defaults.vim
</span><span>let skip_defaults_vim = 1
</span><span>if has(&#39;mouse&#39;)
</span><span>    set mouse-=a
</span><span>endif
</span></code></pre>
<h4 id="f5zhi-xing-jiao-ben">F5执行脚本</h4>
<p>将下面的配置放到.vimrc文件即可：</p>
<pre style="background-color:#ffffff;color:#323232;"><code><span>&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
</span><span>&quot;Quickly Run
</span><span>&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
</span><span>map &lt;F5&gt; :call CompileRunGcc()&lt;CR&gt;
</span><span>func! CompileRunGcc()
</span><span>	exec &quot;w&quot;
</span><span>	if &amp;filetype == &#39;c&#39;
</span><span>		exec &quot;!g++ % -o %&lt;&quot;
</span><span>		exec &quot;!time ./%&lt;&quot;
</span><span>	elseif &amp;filetype == &#39;cpp&#39;
</span><span>		exec &quot;!g++ % -o %&lt;&quot;
</span><span>		exec &quot;!time ./%&lt;&quot;
</span><span>	elseif &amp;filetype == &#39;java&#39;
</span><span>		exec &quot;!javac %&quot;
</span><span>		exec &quot;!time java %&lt;&quot;
</span><span>	elseif &amp;filetype == &#39;sh&#39;
</span><span>		:!time bash %
</span><span>	elseif &amp;filetype == &#39;python&#39;
</span><span>		exec &quot;!time python2.7 %&quot;
</span><span>	elseif &amp;filetype == &#39;html&#39;
</span><span>		exec &quot;!firefox % &amp;&quot;
</span><span>	elseif &amp;filetype == &#39;go&#39;
</span><span>        exec &quot;!go build %&lt;&quot;
</span><span>		exec &quot;!time go run %&quot;
</span><span>	elseif &amp;filetype == &#39;mkd&#39;
</span><span>		exec &quot;!~/.vim/markdown.pl % &gt; %.html &amp;&quot;
</span><span>		exec &quot;!firefox %.html &amp;&quot;
</span><span>	endif
</span><span>endfunc
</span></code></pre>
<h2 id="can-kao">参考</h2>
<p>https://blog.chaos.run/dreams/ubuntu-server-starting-settings</p>
<p>https://github.com/fail2ban/fail2ban/wiki/Proper-fail2ban-configuration</p>
<p>https://xirikm.net/2019/504-1</p>
</article>
  </main>
  <footer>
    <p>
      Powered by <a target="_blank" rel="noopener" href="https://www.getzola.org">zola 0.20.0</a>
      | Theme <a target=_blank rel=noopener href=https://github.com/inhzus/zola-futu>futu@main</a>
    </p>
  </footer>
  
</body>
</html>
